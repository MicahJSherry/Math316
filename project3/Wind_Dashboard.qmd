---
title: "Weather Dashboard"
format:
  dashboard:
    theme: yeti
    pages: true
    orientation: columns
    embed-resources: true
    standalone: true
---

# Overview
::: {.panel-tabset}

## Data
Exploring wind data using the Meteostat Python API:

**Source:** [Meteostat Python API](https://dev.meteostat.net/python/daily.html) 

**Group Members:** Travis, Ira, Micah

**Course:** Data Science 

**Goal:** Use ML models to predict wind trends in distinct U.S. regions 

**Key Variables**

- `wspd`: Average wind speed (mph)  
- `wdir`: Mean wind direction (degrees)  
- `coco`: Condition Code

**Time Period:** 2024  

**Frame:** Hourly and Daily  

:::
---

# Visualizations
::: {.panel-tabset}

## Aggregation Table
```{python}

import pandas as pd
import numpy as np
from meteostat import Point, Hourly
import datetime

cities_by_region = {
    "Northeast": {
        "New York, NY": (40.7128, -74.0060),
        "Boston, MA": (42.3601, -71.0589),
        "Philadelphia, PA": (39.9526, -75.1652),
        "Pittsburgh, PA": (40.4406, -79.9959),
        "Buffalo, NY": (42.8864, -78.8784),
        "Portland, ME": (43.6591, -70.2568),
        "Albany, NY": (42.6526, -73.7562)
    },
    "Southeast": {
        "Miami, FL": (25.7617, -80.1918),
        "Atlanta, GA": (33.7490, -84.3880),
        "Charlotte, NC": (35.2271, -80.8431),
        "Jacksonville, FL": (30.3322, -81.6557),
        "Tampa, FL": (27.9506, -82.4572),
        "New Orleans, LA": (29.9511, -90.0715),
        "Raleigh, NC": (35.7796, -78.6382)
    },
    "Midwest": {
        "Chicago, IL": (41.8781, -87.6298),
        "Detroit, MI": (42.3314, -83.0458),
        "Minneapolis, MN": (44.9778, -93.2650),
        "Cleveland, OH": (41.4993, -81.6944),
        "Milwaukee, WI": (43.0389, -87.9065),
        "Kansas City, MO": (39.0997, -94.5786),
        "Des Moines, IA": (41.5868, -93.6250)
    },
    "West": {
        "Los Angeles, CA": (34.0522, -118.2437),
        "San Francisco, CA": (37.7749, -122.4194),
        "Seattle, WA": (47.6062, -122.3321),
        "Portland, OR": (45.5152, -122.6784),
        "Denver, CO": (39.7392, -104.9903),
        "Las Vegas, NV": (36.1699, -115.1398),
        "Salt Lake City, UT": (40.7608, -111.8910),
        "Phoenix, AZ": (33.4484, -112.0740)
    },
    "Case Studies": {
        "Key West, FL": (24.5551, -81.7800),
        "Oklahoma City, OK": (35.4676, -97.5164),
        "Anchorage, AK": (61.2181, -149.9003),
        "Honolulu, HI": (21.3069, -157.8583)
    }
}

from Tables_code import create_wind_table

table = create_wind_table()
table
```

## Daily Wind Speed
```{python}

from Tables_code import get_regional_daily_wind, chart_regional_daily_wind

df = get_regional_daily_wind()
chart = chart_regional_daily_wind(df)
chart
```


## Daily Temp
```{python}

from Tables_code import get_geo_feature_temperature, chart_geo_feature_temperature

df = get_geo_feature_temperature()
chart = chart_geo_feature_temperature(df)
chart
```

## Wind By City Map
```{python}
import datetime
from Tables_code import get_hourly_wind, generate_cities_map
cities = {
    
        "New York, NY": (40.7128, -74.0060),
        "Boston, MA": (42.3601, -71.0589),
        "Philadelphia, PA": (39.9526, -75.1652),
        "Pittsburgh, PA": (40.4406, -79.9959),
        "Buffalo, NY": (42.8864, -78.8784),
        "Portland, ME": (43.6591, -70.2568),
        "Albany, NY": (42.6526, -73.7562),
        "Miami, FL": (25.7617, -80.1918),
        "Atlanta, GA": (33.7490, -84.3880),
        "Charlotte, NC": (35.2271, -80.8431),
        "Jacksonville, FL": (30.3322, -81.6557),
        "Tampa, FL": (27.9506, -82.4572),
        "New Orleans, LA": (29.9511, -90.0715),
        "Raleigh, NC": (35.7796, -78.6382),
        "Chicago, IL": (41.8781, -87.6298),
        "Detroit, MI": (42.3314, -83.0458),
        "Minneapolis, MN": (44.9778, -93.2650),
        "Cleveland, OH": (41.4993, -81.6944),
        "Milwaukee, WI": (43.0389, -87.9065),
        "Kansas City, MO": (39.0997, -94.5786),
        "Des Moines, IA": (41.5868, -93.6250),
        "Los Angeles, CA": (34.0522, -118.2437),
        "San Francisco, CA": (37.7749, -122.4194),
        "Seattle, WA": (47.6062, -122.3321),
        "Portland, OR": (45.5152, -122.6784),
        "Denver, CO": (39.7392, -104.9903),
        "Las Vegas, NV": (36.1699, -115.1398),
        "Salt Lake City, UT": (40.7608, -111.8910),
        "Phoenix, AZ": (33.4484, -112.0740),
        "Key West, FL": (24.5551, -81.7800),
        "Oklahoma City, OK": (35.4676, -97.5164),
        "Anchorage, AK": (61.2181, -149.9003),
        "Honolulu, HI": (21.3069, -157.8583)
    
}
wind_df = get_hourly_wind(cities, 
    datetime.datetime(2024, 1, 1),
    datetime.datetime(2024, 12, 31))
wind_df["day_of_year"]= wind_df["time"].dt.day_of_year
generate_cities_map(cities, wind_df)

```

:::


---

# Interactive Feature Explorer

::: {.panel-tabset}

## Interactive Feature Explorer
```{python}
from Tables_code import create_complete_dashboard_std

table = create_complete_dashboard_std()

table
```
:::

---

# Extreme Weather
::: {.panel-tabset}

## Case Study: Tornados

```{python}
from Tables_code import get_tornado_data, generate_tornado_map

tornado = get_tornado_data()
generate_tornado_map(tornado)

```

:::

---

# ML Models

::: {.panel-tabset}

## Pittsburgh Area Model
the Goal of this model is to predict wind vectors at the following International Airports:

- Pittsburgh International Airport (PIT) – 40.4406, -79.9959
- Los Angeles International Airport (LAX) – 33.9425, -118.4081
- Miami International Airport (MIA) – 25.7959, -80.2870
- Denver International Airport (DEN) – 39.8617, -104.6731
- Chicago O’Hare International Airport (ORD) – 41.9742, -87.9073
- Seattle-Tacoma International Airport (SEA) – 47.4502, -122.3088  

the features used to predict this are the locations and wind vectors associated with the 5 closest stations

We got the following recorded the following metrics on the test set:

- R²: 0.7408853538672449
- RMSE: 5.428108009372506

```{python}
#| echo: false
from models import get_data, train_model, visualize_predictions

data, stations = get_data()
station_test, y_test, y_pred = train_model(data)

chart = visualize_predictions(station_test, y_test, y_pred, stations)
chart
```


## Classification Model

```{python}
```

:::

---

# Research Questions

1. How do weather patterns change by region?

2. What are some case studies of extreme weather?

3. How do geographical features (lakes, oceans, mountains, deserts, plains) impact weather patterns?

